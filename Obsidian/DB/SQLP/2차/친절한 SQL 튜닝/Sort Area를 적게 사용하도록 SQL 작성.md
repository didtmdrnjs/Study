### Top N 쿼리의 소트 부하 경감 원리

소트 연산을 생략할 수 없을 때 실행계획에는 Sort Order By 오퍼레이션이 나타난다.

여기서 Sort Order By 옆에 Stopkey가 붙는데, 이건 소트 연산을 피할 수 없어 Sort Order By 오퍼레이션을 수행하지만 Top N 소트 알고리즘이 작동한다는 사실을 표시한다.

- 이 알고리즘이 동작하면 소트 연산 횟수와 Sort Area 사용량을 최소화해 준다.
    - 처음 10개 만 정렬을 하고 배열 맨 오른쪽 끝 값과 비교해서 그보다 작은 값이 나타날 때만 배열 내에서 다시 정렬하고, 기존에 맨 끝에 있던 값은 버린다. 이 방식으로 처리하면 대상 집합이 아무리 커도 많은 메모리 공간이 필요하지 않다.
- 알고리즘이 작동하지 않으면 디스크 공간을 사용한다.
- max 대신 rank나 row_number가 소트부하가 더 적다.
    - rank나 row_number는 Top N 소트 알고리즘이 작동하기 때문이다.