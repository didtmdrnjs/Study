## SGA

### 정의
오라클 데이터베이스는 하나 이상의 인스턴스로 구성되고, 이 인스턴스는 메모리 구조와 백그라운드 프로세스로 구성되는데, 이 인스턴스가 시작될 때 마다 SGA(System Global Area) 라는 공유 메모리 영역이 할당되고 백그라운드 프로세스가 시작됨.

### SGA 메모리 구조
1. 데이터베이스 버퍼캐시 : 데이터베이스 파일에서 검색된 데이터 블록을 캐시에 저장.
2. 리두 로그 버퍼 : 물리적 파일에 기록하기 전에 Recovery 정보를 캐시에 저장.
3. Shared Pool : 세션 간에 공유할 수 있는 다양한 구성 요소를 캐시에 저장.
4. Java Pool : JVM(Java Virtual Machine) 내의 세션 별 Java 코드 및 데이터에 사용됨.
5. Stream Pool : Oracle Streams에서 캡처 및 적용 프로세스에 대한 정보를 저장하는데 사용됨.
6. PGA(Program Global Area) : 서버 또는 백그라운드 프로세스에 대한 데이터 및 제어정보를 포함하는 메모리 영역.

### 데이터베이스 버퍼 캐시
- SGA의 일부임
- 데이터 파일에서 읽은 **데이터 블록 복사본**을 보관함.
- 모든 concurrent process에서 공유(인스턴스에 동시에 연결하는 모든 유저는 데이터베이스 버퍼 캐시를 공유함.)
- 특정 데이터 파일을 처음 사용 할 때 데이터베이스 버퍼 캐시를 먼저 찾아봄.
- 캐시에서 데이터를 찾으면 메모리에서 직접 읽을 수 있고, 못 찾으면 데이터에 액세스 하기 전에 데이터 블록을 디스크의 데이터 파일에서 캐시의 버퍼로 복사 해야 함.

### 리두(REDO) 로그 버퍼
- SGA의 순환 버퍼임(CPU 수를 기반으로 함)
- DML 및 DDL 등의 작업이 수행한 리두 변경 사항 관련 정보가 들어있는 리두 항목을 포함 함. (필요한 경우 데이터베이스 복구에 사용됨.)
- 서버 프로세스에 의해 리두 로그 버퍼로 복사됨.
- 연속되는 순차적 공간을 차지.
- LGWR(로그 기록자) 백그라운드 프로세스는 리두 로그 버퍼를 디스크의 활성 리두 로그(또는 파일 그룹)에 기록함.
- CPU 수에 따라 리두 로그 버퍼가 두 개 이상 있을 수 있으며 자동으로 할당된다.

### Shared Pool
- SGA의 일부임
- 다음이 포함됨
    - 라이브러리 캐시
        - SQL 및 PL/SQL문의 공유 부분
    - 데이터 딕셔너리 캐시
    - 결과 캐시
        - SQL query
        - PL/SQL 함수
    - 제어 구조
        - Lock
- 오라클 데이터베이스는 데이커 딕셔너리에 자주 액세스 하므로 두 곳의 특수 위치에 딕셔너리 정보를 보관하도록 지정한다.(라이브러리 캐시, 데이터 딕셔너리 캐시)
- 라이브러리 캐시 : SQL문, PL/SQL, 프로시저 및 패키지의 공유 가능한 부분이 포함됨.
- 데이터 딕셔너리 캐시(행 캐시) : 데이터베이스에 대한 참조 정보를 포함하는 데이터베이스 테이블의 모음.
- 제어구조 : 반드시 필요한 Lock 구조를 포함한다.